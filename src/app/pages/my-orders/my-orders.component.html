<div class="container mt-4">
  <h2 class="mb-4"><i class="bi bi-clock-history"></i> Meus Pedidos</h2>

  <div *ngIf="orders.length === 0" class="alert alert-warning">
    Você ainda não fez nenhum pedido.
  </div>

  <div class="accordion" id="accordionOrders">
    <div class="accordion-item" *ngFor="let order of orders; let i = index">

      <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" [attr.data-bs-target]="'#order'+i">
          <span class="badge bg-secondary me-3">{{ order.creationDate | date:'dd/MM/yyyy HH:mm' }}</span>
          <strong>Status: {{ order.status }}</strong>
          <span class="ms-auto text-success fw-bold">{{ getTotal(order) | currency:'BRL' }}</span>
        </button>
      </h2>

      <div [id]="'order'+i" class="accordion-collapse collapse" data-bs-parent="#accordionOrders">
        <div class="accordion-body">
          <ul class="list-group list-group-flush">
            <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let item of order.items">
              <div>
                {{ item.quantity }}x {{ item.product.name }}
              </div>
              <span class="text-muted">{{ item.price | currency:'BRL' }}</span>
            </li>
          </ul>
        </div>
      </div>

    </div>
  </div>

  <div class="mt-3">
      <a routerLink="/" class="btn btn-outline-primary">Voltar para Loja</a>
  </div>
</div>
